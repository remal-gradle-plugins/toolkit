println "hasProperty('signing.key'): ${hasProperty('signing.key')}"
println "!property('signing.key').toString().isEmpty(): ${!property('signing.key').toString().isEmpty()}"
println 'key: ' + findProperty('signing.key')?.toString()?.length()
println 'keyId: ' + findProperty('signing.keyId')?.toString()?.length()
println 'password: ' + findProperty('signing.password')?.toString()?.length()
allprojects {
    if (hasProperty('signing.key') && !property('signing.key').toString().isEmpty()) {
        apply plugin: 'signing'
    }

    pluginManager.withPlugin('signing') {
        signing {
            useInMemoryPgpKeys(
                property('signing.keyId').toString(),
                property('signing.key').toString(),
                property('signing.password').toString()
            )
        }
    }
}
